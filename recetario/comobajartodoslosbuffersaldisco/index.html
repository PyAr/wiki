<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Comobajartodoslosbuffersaldisco | Python Argentina Wiki</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/bootblog.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/custom.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://wiki.python.org.ar/recetario/comobajartodoslosbuffersaldisco/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Python Argentina">
<meta property="og:site_name" content="Python Argentina Wiki">
<meta property="og:title" content="Comobajartodoslosbuffersaldisco">
<meta property="og:url" content="https://wiki.python.org.ar/recetario/comobajartodoslosbuffersaldisco/">
<meta property="og:description" content="Cuidado! Esta receta no se aplica en todos los casos...


Cerrar correctamente tu programa
Mejores Prácticas (o Best Practice) de cómo debería cerrarse tu programa de una manera linux-friendly, para p">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-07-05T19:39:10-03:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<div class="container px-0">
    <nav id="main-navbar" class="navbar navbar-expand-lg navbar-light bg-light"><a class="navbar-brand" href="https://www.python.org.ar/">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav">
<li class="nav-item">
                    <a class="nav-link" href="http://www.python.org.ar"><span class="inicio"></span>Inicio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../pyar/"><span class="quienes_somos"></span>Nosotros</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../foro_y_redes/"><span class="navbar_lista_de_correo"></span>Foro</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../"><span class="wiki"></span>Wiki</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://www.python.org.ar/noticias/"><span class="news"></span>Noticias</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://www.python.org.ar/irc/"><span class="irc"></span>IRC</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://www.python.org.ar/eventos/"><span class="eventos"></span>Eventos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="http://www.python.org.ar/trabajo/"><span class="jobs"></span>Trabajos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://ac.python.org.ar/"><span class="quienes_somos"></span>Asoc. Civil</a>
                </li>                
            </ul>
</div>
    </nav>
</div>

<!-- Header and menu bar -->
<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
<div class="col-lg-12 px-4 py-2">
    <div class="page-header">
        <div class="pull-right">
            <a href="https://github.com/PyAr/wiki/blob/master/pages/recetario/comobajartodoslosbuffersaldisco.rst" id="sourcelink" class="nav-link">Editar</a>
        </div>
        <h2>Comobajartodoslosbuffersaldisco</h2>
    </div>
    <div class="e-content entry-content" itemprop="articleBody text">
    <blockquote>
<p><strong>Cuidado!</strong> Esta receta no se aplica en todos los casos...</p>
</blockquote>
<section id="cerrar-correctamente-tu-programa"><h2>Cerrar correctamente tu programa</h2>
<p>Mejores Prácticas <em>(o Best Practice)</em> de cómo debería cerrarse tu programa de una manera linux-friendly, para prevenir corrupción/pérdida de datos.</p>
<p><strong>Disclaimer:</strong> Esto es más relacionado al OS que a Python en si, válido para los SO tipo Unix, pero es importante para lograr una aplicacion que funcione como debe.</p>
<div class="code"><pre class="code python"><a id="rest_code_2f2887e695064295bce9079b2cb93b3c-1" name="rest_code_2f2887e695064295bce9079b2cb93b3c-1" href="#rest_code_2f2887e695064295bce9079b2cb93b3c-1"></a>  <span class="kn">import</span> <span class="nn">os</span>
<a id="rest_code_2f2887e695064295bce9079b2cb93b3c-2" name="rest_code_2f2887e695064295bce9079b2cb93b3c-2" href="#rest_code_2f2887e695064295bce9079b2cb93b3c-2"></a>
<a id="rest_code_2f2887e695064295bce9079b2cb93b3c-3" name="rest_code_2f2887e695064295bce9079b2cb93b3c-3" href="#rest_code_2f2887e695064295bce9079b2cb93b3c-3"></a>  <span class="c1"># Tu programa debe invocar este comando y luego cerrarse.</span>
<a id="rest_code_2f2887e695064295bce9079b2cb93b3c-4" name="rest_code_2f2887e695064295bce9079b2cb93b3c-4" href="#rest_code_2f2887e695064295bce9079b2cb93b3c-4"></a>  <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'sync'</span><span class="p">)</span>
<a id="rest_code_2f2887e695064295bce9079b2cb93b3c-5" name="rest_code_2f2887e695064295bce9079b2cb93b3c-5" href="#rest_code_2f2887e695064295bce9079b2cb93b3c-5"></a>
<a id="rest_code_2f2887e695064295bce9079b2cb93b3c-6" name="rest_code_2f2887e695064295bce9079b2cb93b3c-6" href="#rest_code_2f2887e695064295bce9079b2cb93b3c-6"></a><span class="o">**</span><span class="err">¿</span><span class="n">Por</span> <span class="n">qué</span><span class="err">?</span><span class="p">:</span><span class="o">**</span>  <span class="n">En</span> <span class="n">Linux</span> <span class="n">los</span> <span class="n">datos</span> <span class="n">que</span> <span class="n">teóricamente</span> <span class="n">deberían</span> <span class="n">estar</span> <span class="n">escritos</span> <span class="n">en</span> <span class="n">el</span> <span class="n">disco</span><span class="p">,</span> <span class="n">no</span> <span class="n">siempre</span> <span class="n">lo</span> <span class="n">estan</span> <span class="n">en</span> <span class="n">la</span> <span class="n">realidad</span><span class="p">,</span> <span class="n">por</span> <span class="n">un</span> <span class="n">período</span> <span class="n">de</span> <span class="n">tiempo</span> <span class="n">variable</span> <span class="n">de</span> <span class="n">unos</span> <span class="n">segundos</span> <span class="n">podrían</span> <span class="n">mantenerse</span> <span class="n">en</span> <span class="n">RAM</span><span class="o">.</span> <span class="n">El</span> <span class="n">tiempo</span> <span class="n">en</span> <span class="n">segundos</span> <span class="n">varía</span> <span class="n">según</span> <span class="n">las</span> <span class="n">configuraciones</span> <span class="k">del</span> <span class="n">Kernel</span><span class="o">.</span>
</pre></div>
<p><strong>Ejemplo:</strong></p>
<div class="code"><pre class="code bash"><a id="rest_code_f226ae1819b54471ac2503fc7a2032d5-1" name="rest_code_f226ae1819b54471ac2503fc7a2032d5-1" href="#rest_code_f226ae1819b54471ac2503fc7a2032d5-1"></a>cat<span class="w"> </span>/proc/sys/vm/dirty_writeback_centisecs
<a id="rest_code_f226ae1819b54471ac2503fc7a2032d5-2" name="rest_code_f226ae1819b54471ac2503fc7a2032d5-2" href="#rest_code_f226ae1819b54471ac2503fc7a2032d5-2"></a><span class="m">500</span>
</pre></div>
<p>Esto significa que ningun dato se escribirá a disco realmente durante 5 Segundos, esto parece poco, pero en algunos casos como Notebooks o equipos con UPS este valor puede estar en 1500, es decir 15 segundos <em>(lo que es un montón en Infomática)</em>. No piensen que este valor se puede reducir, esto tendría al Kernel contantemente escribiendo la RAM al disco. Esto es más notable en EXT4 con Extents activados. Alternativamente al ejemplo puedes agregar que detecte que OS es y ejecutar o no sync, también puede solucionar algunos "Segmentation Fault" misteriosos al cerrar tu programa.</p>
<p>En mi Notebook, obtengo este resultado:</p>
<p>(Si escribo un programa que no invoca a sync puedo perder 10 segundos de datos).</p>
<div class="code"><pre class="code bash"><a id="rest_code_01bb5bb0ed044c158212700c5738d41c-1" name="rest_code_01bb5bb0ed044c158212700c5738d41c-1" href="#rest_code_01bb5bb0ed044c158212700c5738d41c-1"></a>juan@wind:~$<span class="w"> </span>cat<span class="w"> </span>/proc/sys/vm/dirty_writeback_centisecs
<a id="rest_code_01bb5bb0ed044c158212700c5738d41c-2" name="rest_code_01bb5bb0ed044c158212700c5738d41c-2" href="#rest_code_01bb5bb0ed044c158212700c5738d41c-2"></a><span class="m">1000</span>
</pre></div>
</section>
</div>    
</div>
        <!--End of body content-->

        <footer id="footer" class="bg-light"><span>Contents © 2024         <a href="mailto:admin@python.org.ar">Python Argentina</a> - Powered by         <a href="https://getnikola.com" rel="nofollow" target="_blanc">Nikola</a>         </span><span><a href="https://ac.python.org.ar/#donaciones" rel="nofollow" target="_blanc">Aporta a PyAr con tu donación</a><a></a></span>
            
        </footer>
</div>
</div>

            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/popper.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script src="../../assets/js/pyar.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
